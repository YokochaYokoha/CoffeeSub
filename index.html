<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="manifest" href="/CoffeeSub/manifest.json">
    <title>CoffeeSub | Web版Coffeeブラウザー</title>
    <style>
.searchdel {
    #searchQuery {
  width: 200px;
}


   button {
       font-family: sans-serif ;
            padding: 10px 20px;
            background: #e61919;
            color: #fff;
            border: none;
            cursor: pointer;
       display: inline-block;
       -webkit-appearance: none;
        }
   
}
        .mkqr {
             #qrmoji {
  width: 200px;
        }
        }
        .toolbar {
            overflow-x: auto;
            white-space: nowrap;
        }
  .toolbar  img{
      font-family: sans-serif ;
            display: inlone-block;
      maxwidth: 100%;
            margin-right: 10px;
        }
  .coffeetitlecontainer {
      font-family: sans-serif ;
            display: flex;
            align-items: center;  
        }
        h1 {
            background-color: white;
            margin-left: 20px;  
        }
img {
border: none;
}
        input[type="text"] {
            width: 300px;
            padding: 10px;
            margin: 10px 0;
        }

        button {
            padding: 10px 20px;
            background: #fff;
            color: #111;
            border: none;
            cursor: pointer;
            font-family: sans-serif ;
            display: inline-block;
         -webkit-appearance: none;
        }

        button:hover {
            background: #303F9F;
        }
body {
    font-family: sans-serif ;
            background-image: url('./backpic3.png');
            background-repeat: no-repeat;
            background-position: center center;
            background-attachment: fixed;
            background-size: cover;
        }
    </style>
</head>
<body>
    <script src="https://unpkg.com/html5-qrcode"></script>
<div class="coffeetitlecontainer">
<img src="./csub.png" alt="バナー画像" width="7%">
<h1>Coffee Sub</h1>
</div>
<br>
<noscript><h1><font color="red">JavaScriptが無効です。Coffeeブラウザーの場合は、Upline上の「快適読書モード」または「緊急データセーバー」をオフにしてください。JavaScriptが無効な状態では動作しません。</font></h1></noscript>
<br>
<div class="searchdel">
    <input type="text" id="searchQuery" placeholder="ここに入力して検索">

<button onclick="deletequery()">削除</button>
</div>
<br>
    <button onclick="searchGoogle()">Google検索</button>
    <button onclick="searchDuck()">DuckDuckGo検索</button>
    <button onclick="g2url()">URL</button>
<br>
    <button onclick="searchYT()">YouTube検索</button>
    <button onclick="searchNico()">ニコニコ動画検索</button>
    <!--<button onclick="searchYm()">YouTubeMusic検索</button>--!>

<br>
<br>
<br>
 <button onclick="goqr()">QRコードを生成</button>
    <p>注意:外部APIを使用するため、個人情報やその他機密情報等の大切な情報の入力はお控えください。</p>
    <br>
    <div id="capwindow">
    </div>
        <div id="mkqr">
    <input type="text" id="qrmoji" placeholder="QRコード化するURL(文字)を入力">

<button onclick="deletequeryqr()">削除</button>
</div>
    <p>現在製作中(試験運用中)</p>
    <div class="toolbar">
    <a onclick="readqr()"><img src="https://github.com/YokochaYokoha/YokochaYokoha/blob/main/qr.png?raw=true" alt="QRコードを読み取る" width="10%"></a>
    <p>読み取り</p>
    <a onclick="mkqrvisible()"><img src="./mkqr.png" alt="QRコード作成" width="10%"></a>
    <p>作成機能</p>   
    </div>
        <br>
<h2>LatestNews-最新情報↓</h2>
<marquee>メンテナンス中です。一部の機能が正常に動作しない場合があります。完了までしばらくお待ちくださいませ!(管理者:横茶横葉より)</marquee>
<br>
    
<br>
<p>CoffeeUI:©YokochaYokoha All Rights Reserved.</p>
<a href="https://yokochayokoha.github.io">横茶横葉(製作者)のサイト</a>
<a href="https://sites.google.com/view/coffeebr">Coffeeプロジェクトオフィシャルサイト!</a>
<p>Background Image:©Mikan All Rights Reserved.</p>
<p>Ver.2.4 ©YokochaYokoha All Rights Reserved.</p>
    <a href="https://yokochayokoha.github.io/CoffeeSub/thanks"><button>オープンソースライセンス表示(osl),権利表記(©)とスペシャルサンクス(Thanks!)</button></a>
    <script>
        if ('serviceWorker' in navigator) {
  window.addEventListener('load', function() {
    navigator.serviceWorker.register('/CoffeeSub/service-worker.js');
  });
}


        function deletequery() 
        {

        document.getElementById('searchQuery').value="";

        }
    const mkqrcomponents = document.getElementById('mkqr');
    function mkqrvisible() 
    {
    if (mkqrcomponents.style.display === 'none')
    {
    mkqrcomponents.style.display='block';
    }
    else
    {
   mkqrcomponents.style.display='none';
    }
    }
       
function resqr(getqr,res)
    {
      document.getElementById('searchQuery').value=getqr;
    alert("読み取ったテキストを検索ボックスに書き込みました。URLの場合はそのままURLボタンを、文字の場合は各種検索ボタンを押して下さい。読み取った文字:"+getqr);
        
        }
 function readqr() {
              var usav=window.navigator.userAgent;
        //Coffee(coffee)Detection(独自リーダーを使用。Webview内でカメラ起動、画像選択不可のため。)
        if(usav.includes("offee"))
        {
            window.location.href="https://yokochayokoha.github.io/CoffeeSub/coffeeqr";
        }
        else
        {
    console.log("CHk PT1");
       let qrscn =new Html5QrcodeScanner("capwindow",{fps:24, qrbos: 260});
            console.log("CHK PT2");
            qrscn.render(resqr);
            console.log("invoke");
            
        }
 }
    
        
        
        function goqr() 
         {
             
            var query = document.getElementById('qrmoji').value;
            if (query) {
                var url = "https://api.qrserver.com/v1/create-qr-code/?data=" + query;

                window.location.href = url;

            } else {
                console.log("No Text Detected.テキスト未入力");
                alert("QRコード化する文字が正しく読み取れませんでした。テキストボックスに入力されているかを再度ご確認下さい。");
            }
        }

        function deletequeryqr() 
        {

        document.getElementById('qrmoji').value="";

        }
        
        function cpy() 
        {

        var ctxt =document.getElementById('searchQuery')[0];
        ctxt.select();
        document.exeCommand("copy");

        }
     
        function pst()
        {
        
          var ptxt=document.getElementById('searchQuery');
          ptxt.focus();
          document.exeCommand("paste");
         }

                        

        function searchGoogle() 
         {
            var query = document.getElementById('searchQuery').value;
            if (query) {
                var url = "https://www.google.co.jp/search?q=" + encodeURIComponent(query);

                window.location.href = url;

            } else {
                window.location.href = "https://www.google.co.jp"
            }
        }

        function searchDuck() 
         {
            var query = document.getElementById('searchQuery').value;
            if (query) {
                var url = "https://duckduckgo.com/?q=" + encodeURIComponent(query);
                window.location.href = url;

            } else {
                window.location.href = "https://duckduckgo.com/"
            }
        }

        function g2url() 
         {
            var query = document.getElementById('searchQuery').value;
            if (query) {
                var url = query;
                window.location.href = url;

            } else {
       alert('検索ボックス内にURLが入力されていません。入力をお願いいたします。');
            }
        }

        function searchYT() 
         {
            var query = document.getElementById('searchQuery').value;
            if (query) {
                var url = "https://www.youtube.com/results?search_query=" + encodeURIComponent(query);
document.cookie = "URL:" + "expires=60;" + "path=/";
                window.location.href = url;

            } else {
                window.location.href = "https://www.youtube.com"
            }
        }

        function searchNico() 
         {
            var query = document.getElementById('searchQuery').value;
            if (query) {
                var url = "https://sp.nicovideo.jp/search/" + encodeURIComponent(query);
document.cookie = "URL:" + "expires=60;" + "path=/";
                window.location.href = url;

            } else {
                window.location.href = "https://sp.nicovideo.jp"
            }
        }

        function searchYm() 
         {
            var query = document.getElementById('searchQuery').value;
            if (query) {
                var url = "https://music.youtube.com/search?q=" + encodeURIComponent(query);
document.cookie = "URL:" + "expires=60;" + "path=/";
                window.location.href = url;

            } else {
                window.location.href = "https://music.youtube.com"
            }
        }
    </script>
</body>
</html>
